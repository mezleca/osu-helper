var B={version:Number,folders:Number,account_unlocked:Boolean,player_name:String,beatmaps_count:Number,beatmaps:[{entry:Number,artist_name:String,artist_name_unicode:String,song_title:String,song_title_unicode:String,creator_name:String,difficulty:String,audio_file_name:String,md5:String,file:String,status:Number,hitcircle:Number,sliders:Number,spinners:Number,last_modification:Number,approach_rate:Number,circle_size:Number,hp:Number,od:Number,slider_velocity:Number,sr:[{mode:String,sr:[{mod:Number,diff:Number}]}],timing_points:[{bpm:Number,offset:Number,idk_bool:Boolean|String}],drain_time:Number,total_time:Number,audio_preview:Number,difficulty_id:Number,beatmap_id:Number,thread_id:Number,grade_standard:Number,grade_taiko:Number,grade_ctb:Number,grade_mania:Number,local_offset:Number,stack_leniency:Number,mode:Number,source:String,tags:String,online_offset:Number,font:String,unplayed:Boolean,last_played:Number,is_osz2:Boolean,folder_name:String,last_checked:Number,ignore_sounds:Boolean,ignore_skin:Boolean,disable_storyboard:Boolean,disable_video:Boolean,visual_override:Boolean,unknown:Number,last_modified:Number,mania_scroll_speed:Number}],permissions_id:Number,permission:String},v={version:Number,length:Number,beatmaps:[{name:String,maps:Array}]},g=class{collections;osu;buffer;constructor(){this.type="osu",this.osu="",this.collections="",this.buffer,this.offset=0}to_array_buffer=t=>{let s=new ArrayBuffer(t.length),i=new Uint8Array(s);for(let r=0;r<t.length;++r)i[r]=t[r];return s};set_buffer=(t,s)=>{if(s){this.buffer=new DataView(this.to_array_buffer(t));return}this.buffer=new DataView(t)};set_type=t=>{this.type=t};set_directory=t=>{this.directory=t};#s(){let t=this.buffer.getUint8(this.offset);return this.offset+=1,t}#r(){let t=this.buffer.getUint16(this.offset,!0);return this.offset+=2,t}#t(){let t=this.buffer.getUint32(this.offset,!0);return this.offset+=4,t}#a(){let t=this.buffer.getBigInt64(this.offset,!0);return this.offset+=8,t}#c(){let t=0,s=0;do{var i=this.#s();t|=(i&127)<<s,s+=7}while(i&128);return{value:t,bytesRead:this.offset}}#n(){let t=this.buffer.getFloat32(this.offset,!0);return this.offset+=4,t}#o(){let t=this.buffer.getFloat64(this.offset,!0);return this.offset+=8,t}#i(){return this.#s()!=0}#e(){if(!this.#i())return null;let s=this.#c(),i=new Uint8Array(this.buffer.buffer,this.offset,s.value),a=new TextDecoder("utf-8").decode(i);return this.offset+=s.value,a}#l(t){this.offset+=t}#f(t){let s=new ArrayBuffer(1);return new DataView(s).setUint8(0,t),s}#b(t){let s=new ArrayBuffer(2);return new DataView(s).setUint16(0,t,!0),s}#u(t){let s=new ArrayBuffer(4);return new DataView(s).setUint32(0,t,!0),s}#m(t){let s=new ArrayBuffer(8);return new DataView(s).setBigInt64(0,BigInt(t),!0),s}#_(t){let s=new ArrayBuffer(4);return new DataView(s).setFloat32(0,t,!0),s}#g(t){let s=new ArrayBuffer(8);return new DataView(s).setFloat64(0,t,!0),s}#p(t){return this.#f(t?1:0)}#h(t){if(t===null)return this.#f(0);let s=new TextEncoder().encode(t),i=this.#d(s.byteLength),r=new Uint8Array(i.byteLength+s.byteLength+1);return r.set(new Uint8Array([11]),0),r.set(new Uint8Array(i),1),r.set(new Uint8Array(s),1+i.byteLength),r.buffer}#d(t){let s=new ArrayBuffer(5),i=new DataView(s),r=0;do{let a=t&127;t>>>=7,t!==0&&(a|=128),i.setUint8(r++,a)}while(t!==0);return s.slice(0,r)}write_collections_data=()=>new Promise(async(t,s)=>{if(!this.collections){console.log("No collections found");return}this.offset=0;let i=[],r=this.collections;i.push(this.#u(r.version)),i.push(this.#u(r.beatmaps.length));for(let n=0;n<r.length;n++){let u=r.beatmaps[n];i.push(this.#h(u.name)),i.push(this.#u(u.maps.length));for(let o=0;o<u.maps.length;o++){let h=this.#h(u.maps[o]);i.push(h)}}let a=i.reduce((n,u)=>{let o=new Uint8Array(n.byteLength+u.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(u),n.byteLength),o.buffer},new ArrayBuffer(0));this.buffer=a,t(this.buffer)});get_osu_data=t=>new Promise(async s=>{this.osu.beatmaps||s();let i=[],r=this.#t(),a=this.#t(),n=this.#i();this.#l(8);let u=this.#e(),o=this.#t(),h={1:"osu!",2:"taiko",3:"ctb",4:"mania"};for(let _=0;_<o;_++){let e={};e.entry=r<20191106?this.#t():0,e.artist_name=this.#e(),e.artist_name_unicode=this.#e(),e.song_title=this.#e(),e.song_title_unicode=this.#e(),e.creator_name=this.#e(),e.difficulty=this.#e(),e.audio_file_name=this.#e(),e.md5=this.#e(),e.file=this.#e(),e.status=this.#s(),e.hitcircle=this.#r(),e.sliders=this.#r(),e.spinners=this.#r(),e.last_modification=this.#a(!0),e.approach_rate=r<20140609?this.#s():this.#n(),e.circle_size=r<20140609?this.#s():this.#n(),e.hp=r<20140609?this.#s():this.#n(),e.od=r<20140609?this.#s():this.#n(),e.slider_velocity=this.#o(),e.sr=[],e.timing_points=[];for(let c=0;c<4;c++){let m=this.#t(),d=[];for(let b=0;b<m;b++){this.#s();let w=this.#t();this.#s();let y=this.#o();d.push([w,y])}e.sr.push({mode:h[c+1],sr:d})}e.drain_time=this.#t(),e.total_time=this.#t(),e.audio_preview=this.#t();let p=this.#t();for(let c=0;c<p;c++){let m=this.#o(),d=this.#o(),b=this.#i();e.timing_points.length<6&&(e.timing_points.length==6?e.timing_points.push(["..."]):e.timing_points.push({bpm:m,offset:d,idk_bool:b}))}e.difficulty_id=this.#t(),e.beatmap_id=this.#t(),e.thread_id=this.#t(),e.grade_standard=this.#s(),e.grade_taiko=this.#s(),e.grade_ctb=this.#s(),e.grade_mania=this.#s(),e.local_offset=this.#r(),e.stack_leniency=this.#n(),e.mode=this.#s(),e.source=this.#e(),e.tags=this.#e(),e.online_offset=this.#r(),e.font=this.#e(),e.unplayed=this.#i(),e.last_played=this.#a(),e.is_osz2=this.#i(),e.folder_name=this.#e(),e.last_checked=this.#a(),e.ignore_sounds=this.#i(),e.ignore_skin=this.#i(),e.disable_storyboard=this.#i(),e.disable_video=this.#i(),e.visual_override=this.#i(),r<20140609&&(e.unknown=this.#r()),e.last_modified=this.#t(),e.mania_scroll_speed=this.#s(),i.push(e),t&&i.length+1>t}let l=this.#t(),f="";switch(l){case 0:f="None";break;case 1:f="Normal";break;case 2:f="Moderator";break;case 4:f="Supporter";break;case 8:f="Friend";break;case 16:f="Peppy";break;case 32:f="World Cup Staff";break}this.offset=0,this.osu={version:r,folders:a,account_unlocked:n,player_name:u,beatmaps_count:o,beatmaps:i,permissions_id:l,permission:f},s()});get_collections_data=t=>new Promise(async s=>{let i=[],r=this.#t(),a=this.#t();for(let n=0;n<a;n++){let u=this.#e(),o=this.#t(),h=[];for(let l=0;l<o;l++){let f=this.#e();h.push(f)}t&&i.length+1>t||i.push({name:u,maps:[...h]})}this.offset=0,this.collections={version:r,length:a,beatmaps:i},s(this.collections)})};var OsuReader = g;
